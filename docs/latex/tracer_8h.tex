\hypertarget{tracer_8h}{}\doxysection{/home/shraiwi/\+Documents/\+Git\+Hub/tracer/main/include/tracer.h File Reference}
\label{tracer_8h}\index{/home/shraiwi/Documents/GitHub/tracer/main/include/tracer.h@{/home/shraiwi/Documents/GitHub/tracer/main/include/tracer.h}}


Contains all of the user-\/facing interactions in the Tracer A\+PI.  


{\ttfamily \#include \char`\"{}tracer\+\_\+crypto.\+h\char`\"{}}\newline
Include dependency graph for tracer.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{tracer_8h__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}}
\begin{DoxyCompactList}\small\item\em A structure containing a Temporary Exposure Key and a U\+N\+IX Epoch signifying its creation time. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structtracer__rpi}{tracer\+\_\+rpi}}
\begin{DoxyCompactList}\small\item\em A Rolling Proximity Identifier. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structtracer__rpik}{tracer\+\_\+rpik}}
\begin{DoxyCompactList}\small\item\em A Rolling Proximity Identifier Key; used to encrypt Rolling Proximity Identifiers. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structtracer__aem}{tracer\+\_\+aem}}
\begin{DoxyCompactList}\small\item\em The Associated Encrypted Metadata to an R\+PI. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structtracer__aemk}{tracer\+\_\+aemk}}
\begin{DoxyCompactList}\small\item\em An Associated Encrypted Metadata Key; used to encrypt Associated Encrypted Metadata. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structtracer__metadata}{tracer\+\_\+metadata}}
\begin{DoxyCompactList}\small\item\em A container for unencrypted metadata. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}}
\begin{DoxyCompactList}\small\item\em An R\+PI and A\+EM pair. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structtracer__keypair}{tracer\+\_\+keypair}}
\begin{DoxyCompactList}\small\item\em An R\+P\+IK and A\+E\+MK pair. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structtracer__ble__payload}{tracer\+\_\+ble\+\_\+payload}}
\begin{DoxyCompactList}\small\item\em A raw B\+LE advertising payload. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{tracer_8h_aa3b3126d72e6e7f5c67e930efb99b156}\label{tracer_8h_aa3b3126d72e6e7f5c67e930efb99b156}} 
\#define {\bfseries \+\_\+\+T\+R\+A\+C\+E\+R\+\_\+\+H\+\_\+}
\item 
\mbox{\Hypertarget{tracer_8h_aa66adb2ea2691ea9d41dab23ec872e73}\label{tracer_8h_aa66adb2ea2691ea9d41dab23ec872e73}} 
\#define {\bfseries sizeof\+\_\+member}(type,  member)~sizeof(((type$\ast$)0)-\/$>$member)
\item 
\mbox{\Hypertarget{tracer_8h_a528b837b758f3a80a93282c167152b80}\label{tracer_8h_a528b837b758f3a80a93282c167152b80}} 
\#define {\bfseries T\+R\+A\+C\+E\+R\+\_\+\+S\+C\+A\+N\+\_\+\+I\+N\+T\+E\+R\+V\+AL}~1
\item 
\mbox{\Hypertarget{tracer_8h_ad8ccd7e44f2635f947f8c44b19ceb903}\label{tracer_8h_ad8ccd7e44f2635f947f8c44b19ceb903}} 
\#define {\bfseries T\+R\+A\+C\+E\+R\+\_\+\+T\+E\+K\+\_\+\+I\+N\+T\+E\+R\+V\+AL}~2
\item 
\mbox{\Hypertarget{tracer_8h_add56daf453b09a90db5246ccff215975}\label{tracer_8h_add56daf453b09a90db5246ccff215975}} 
\#define {\bfseries T\+R\+A\+C\+E\+R\+\_\+\+E\+N\+I\+N\+\_\+\+I\+N\+T\+E\+R\+V\+AL}~1
\item 
\mbox{\Hypertarget{tracer_8h_a061c7edafb8e834a4b08328982c38a21}\label{tracer_8h_a061c7edafb8e834a4b08328982c38a21}} 
\#define {\bfseries T\+R\+A\+C\+E\+R\+\_\+\+S\+C\+A\+N\+\_\+\+S\+T\+O\+R\+E\+\_\+\+P\+E\+R\+I\+OD}~28
\item 
\mbox{\Hypertarget{tracer_8h_a71adfb765ee884e36ab57ea10a4934ea}\label{tracer_8h_a71adfb765ee884e36ab57ea10a4934ea}} 
\#define {\bfseries T\+R\+A\+C\+E\+R\+\_\+\+T\+E\+K\+\_\+\+S\+T\+O\+R\+E\+\_\+\+P\+E\+R\+I\+OD}~14
\item 
\mbox{\Hypertarget{tracer_8h_ace4a2ceb5712f30a84e42c4877ddfba1}\label{tracer_8h_ace4a2ceb5712f30a84e42c4877ddfba1}} 
\#define {\bfseries T\+R\+A\+C\+E\+R\+\_\+\+E\+N\+I\+N\+S\+\_\+\+P\+E\+R\+\_\+\+D\+AY}~(T\+R\+A\+C\+E\+R\+\_\+\+T\+E\+K\+\_\+\+I\+N\+T\+E\+R\+V\+AL / T\+R\+A\+C\+E\+R\+\_\+\+E\+N\+I\+N\+\_\+\+I\+N\+T\+E\+R\+V\+AL)
\item 
\mbox{\Hypertarget{tracer_8h_ae0977debefb3ac261fe81657adbeeca1}\label{tracer_8h_ae0977debefb3ac261fe81657adbeeca1}} 
\#define {\bfseries T\+R\+A\+C\+E\+R\+\_\+\+M\+I\+N\+U\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+D\+AY}~(24 $\ast$ 60)
\item 
\mbox{\Hypertarget{tracer_8h_af5c1f79c80ff9491e6adaf76a5246d79}\label{tracer_8h_af5c1f79c80ff9491e6adaf76a5246d79}} 
\#define {\bfseries T\+R\+A\+C\+E\+R\+\_\+\+S\+C\+A\+N\+\_\+\+E\+X\+P\+I\+RY}~(T\+R\+A\+C\+E\+R\+\_\+\+M\+I\+N\+U\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+D\+AY $\ast$ T\+R\+A\+C\+E\+R\+\_\+\+S\+C\+A\+N\+\_\+\+S\+T\+O\+R\+E\+\_\+\+P\+E\+R\+I\+OD / T\+R\+A\+C\+E\+R\+\_\+\+S\+C\+A\+N\+\_\+\+I\+N\+T\+E\+R\+V\+AL)
\item 
\mbox{\Hypertarget{tracer_8h_a94531a443997ebee803ce788d3d0b417}\label{tracer_8h_a94531a443997ebee803ce788d3d0b417}} 
\#define {\bfseries T\+R\+A\+C\+E\+R\+\_\+\+E\+N\+I\+N\+\_\+\+E\+X\+P\+I\+RY}~(T\+R\+A\+C\+E\+R\+\_\+\+T\+E\+K\+\_\+\+S\+T\+O\+R\+E\+\_\+\+P\+E\+R\+I\+OD $\ast$ T\+R\+A\+C\+E\+R\+\_\+\+E\+N\+I\+N\+S\+\_\+\+P\+E\+R\+\_\+\+D\+AY)
\item 
\mbox{\Hypertarget{tracer_8h_ab74f12c1347375485745941649ab78f5}\label{tracer_8h_ab74f12c1347375485745941649ab78f5}} 
\#define {\bfseries T\+R\+A\+C\+E\+R\+\_\+\+M\+A\+J\+O\+R\+\_\+\+V\+E\+R\+S\+I\+ON}~1
\item 
\mbox{\Hypertarget{tracer_8h_aff047276c70be6f934908a7b92c781c9}\label{tracer_8h_aff047276c70be6f934908a7b92c781c9}} 
\#define {\bfseries T\+R\+A\+C\+E\+R\+\_\+\+M\+I\+N\+O\+R\+\_\+\+V\+E\+R\+S\+I\+ON}~0
\item 
\mbox{\Hypertarget{tracer_8h_a72f133a90fe761e797dec874472340ae}\label{tracer_8h_a72f133a90fe761e797dec874472340ae}} 
\#define {\bfseries R\+P\+I\+\_\+\+S\+T\+R\+I\+NG}~\char`\"{}EN-\/R\+PI\char`\"{}
\item 
\mbox{\Hypertarget{tracer_8h_a6e7e171ce4e4be8e0be42bed1abef134}\label{tracer_8h_a6e7e171ce4e4be8e0be42bed1abef134}} 
\#define {\bfseries R\+P\+I\+K\+\_\+\+S\+T\+R\+I\+NG}~\char`\"{}EN-\/R\+P\+IK\char`\"{}
\item 
\mbox{\Hypertarget{tracer_8h_a2e5efc20e479e0668a22455c09c63da6}\label{tracer_8h_a2e5efc20e479e0668a22455c09c63da6}} 
\#define {\bfseries A\+E\+M\+\_\+\+S\+T\+R\+I\+NG}~\char`\"{}EN-\/A\+EM\char`\"{}
\item 
\mbox{\Hypertarget{tracer_8h_a070054354211d8b192293a41b3712935}\label{tracer_8h_a070054354211d8b192293a41b3712935}} 
\#define {\bfseries A\+E\+M\+K\+\_\+\+S\+T\+R\+I\+NG}~\char`\"{}EN-\/A\+E\+MK\char`\"{}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{tracer_8h_a3742f10381020abbd637d4f5ddec3891}{tracer\+\_\+ble\+\_\+payload\+\_\+add\+\_\+record}} (\mbox{\hyperlink{structtracer__ble__payload}{tracer\+\_\+ble\+\_\+payload}} $\ast$ble\+\_\+payload, uint8\+\_\+t type, void $\ast$data, size\+\_\+t data\+\_\+len)
\begin{DoxyCompactList}\small\item\em Adds a record to the B\+LE payload. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{tracer_8h_a4a35291fe76864b6ceb28dc91530cafd}{tracer\+\_\+en\+\_\+interval\+\_\+number}} (uint32\+\_\+t epoch)
\begin{DoxyCompactList}\small\item\em Gets the E\+N\+Interval\+Number given an epoch. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{tracer_8h_acbcdbab25c515d737b4db4f198443b15}{tracer\+\_\+scan\+\_\+interval\+\_\+number}} (uint32\+\_\+t epoch)
\begin{DoxyCompactList}\small\item\em Gets the Scan Interval Number given an epoch. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structtracer__rpik}{tracer\+\_\+rpik}} \mbox{\hyperlink{tracer_8h_a513d72ec8ee52ad99d5f5d388ae75b70}{tracer\+\_\+derive\+\_\+rpik}} (\mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}} tek)
\begin{DoxyCompactList}\small\item\em Derives a new Rolling Proximity Identifier Key from a Temporary Exposure Key. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structtracer__rpi}{tracer\+\_\+rpi}} \mbox{\hyperlink{tracer_8h_af2acdc5098bfd7ab07cfd053f059962e}{tracer\+\_\+derive\+\_\+rpi}} (\mbox{\hyperlink{structtracer__rpik}{tracer\+\_\+rpik}} rpik, uint32\+\_\+t epoch)
\begin{DoxyCompactList}\small\item\em Encrypts a Rolling Proximity Identifier from an R\+P\+IK and U\+N\+IX epoch. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{tracer_8h_a0aadea78bf29be28f5822988e1be642a}{tracer\+\_\+compare\+\_\+datapairs}} (\mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}} a, \mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}} b)
\begin{DoxyCompactList}\small\item\em Compares the value of two datapairs. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structtracer__metadata}{tracer\+\_\+metadata}} \mbox{\hyperlink{tracer_8h_a6dad82131e380a50b8f558121f9b0fe3}{tracer\+\_\+derive\+\_\+metadata}} (int8\+\_\+t tx\+\_\+power)
\begin{DoxyCompactList}\small\item\em Derives unencrypted metadata. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structtracer__aemk}{tracer\+\_\+aemk}} \mbox{\hyperlink{tracer_8h_a109dfea4b92ad8581825c696865489ce}{tracer\+\_\+derive\+\_\+aemk}} (\mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}} tek)
\begin{DoxyCompactList}\small\item\em Derives an corresponding Associated Encrypted Metadata Key from a Temporary Exposure Key. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structtracer__aem}{tracer\+\_\+aem}} \mbox{\hyperlink{tracer_8h_a631562f73427c2710771736e1a521089}{tracer\+\_\+derive\+\_\+aem}} (\mbox{\hyperlink{structtracer__aemk}{tracer\+\_\+aemk}} aemk, \mbox{\hyperlink{structtracer__rpi}{tracer\+\_\+rpi}} rpi, \mbox{\hyperlink{structtracer__metadata}{tracer\+\_\+metadata}} metadata)
\begin{DoxyCompactList}\small\item\em Encrypts metadata given an Associated Encrypted Metadata Key and Rolling Proximity Identifier. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structtracer__keypair}{tracer\+\_\+keypair}} \mbox{\hyperlink{tracer_8h_a5e2a646f64065538e3f42937beb61454}{tracer\+\_\+derive\+\_\+keypair}} (\mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}} tek)
\begin{DoxyCompactList}\small\item\em Derives a tracer keypair for generating an R\+PI and A\+EM. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structtracer__ble__payload}{tracer\+\_\+ble\+\_\+payload}} \mbox{\hyperlink{tracer_8h_a8a38ceec0a0cb58bc87e43287d8cea57}{tracer\+\_\+derive\+\_\+ble\+\_\+payload}} (\mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}} datapair)
\begin{DoxyCompactList}\small\item\em Derives a new raw B\+LE payload given a datapair. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}} $\ast$ \mbox{\hyperlink{tracer_8h_a6df351c545f88109e4fa00d687c7c7ca}{tracer\+\_\+derive\+\_\+tek}} (uint32\+\_\+t epoch)
\begin{DoxyCompactList}\small\item\em Generates a new Temporary Exposure Key and updates the latest keypair. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}} \mbox{\hyperlink{tracer_8h_a71cc1557149895133059388f0e60f57a}{tracer\+\_\+get\+\_\+latest\+\_\+tek}} ()
\begin{DoxyCompactList}\small\item\em Gets the latest Temporary Exposure Key generated. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{tracer_8h_a8d79eac8cf4cd46c8966ed8accc0d370}{tracer\+\_\+parse\+\_\+ble\+\_\+payload}} (\mbox{\hyperlink{structtracer__ble__payload}{tracer\+\_\+ble\+\_\+payload}} payload, \mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}} $\ast$datapair)
\begin{DoxyCompactList}\small\item\em Attempts to parse a raw B\+LE adverising payload. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{tracer_8h_ac10f55b7d776b6fdc6b70c3e0dd4de39}{tracer\+\_\+detect\+\_\+enin\+\_\+rollover}} (uint32\+\_\+t last\+\_\+epoch, uint32\+\_\+t current\+\_\+epoch)
\begin{DoxyCompactList}\small\item\em Detects if there has been an E\+N\+Interval\+Number rollover. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{tracer_8h_a58173ac16d4cb9eb3a115955b1d28b65}{tracer\+\_\+detect\+\_\+scanin\+\_\+rollover}} (uint32\+\_\+t last\+\_\+epoch, uint32\+\_\+t current\+\_\+epoch)
\begin{DoxyCompactList}\small\item\em Detects whether or not there should be a B\+LE scan performed. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{tracer_8h_ad19adbc4b2555468a65e65d701c2e4a8}{tracer\+\_\+detect\+\_\+tek\+\_\+rollover}} (uint32\+\_\+t last\+\_\+epoch, uint32\+\_\+t current\+\_\+epoch)
\begin{DoxyCompactList}\small\item\em Detects if there needs to be a new T\+EK generated. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{tracer_8h_ab8dea46c9d02bd743e7cc04fe43cb5a5}{tracer\+\_\+verify}} (\mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}} datapair, \mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}} tek, uint32\+\_\+t $\ast$enin, \mbox{\hyperlink{structtracer__metadata}{tracer\+\_\+metadata}} $\ast$output\+\_\+metadata)
\begin{DoxyCompactList}\small\item\em Checks if a scanned R\+PI and A\+EM pair matches a downloaded T\+EK. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}} \mbox{\hyperlink{tracer_8h_a36e3c68ffd53218b36de2326be850f01}{tracer\+\_\+derive\+\_\+datapair}} (uint32\+\_\+t epoch, int8\+\_\+t tx\+\_\+power)
\begin{DoxyCompactList}\small\item\em Derives a R\+P\+I-\/\+A\+EM pair given a unix epoch and tx power. This can be used to create bluetooth payloads. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{tracer_8h_ace9cca54545fe7a14f022e781f985285}\label{tracer_8h_ace9cca54545fe7a14f022e781f985285}} 
\mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}} {\bfseries tracer\+\_\+tek\+\_\+array} \mbox{[}T\+R\+A\+C\+E\+R\+\_\+\+T\+E\+K\+\_\+\+S\+T\+O\+R\+E\+\_\+\+P\+E\+R\+I\+OD\mbox{]}
\item 
\mbox{\Hypertarget{tracer_8h_a309554a5b1bb323fdfcfa3f375147cbc}\label{tracer_8h_a309554a5b1bb323fdfcfa3f375147cbc}} 
size\+\_\+t {\bfseries tracer\+\_\+tek\+\_\+array\+\_\+head} = 0
\item 
\mbox{\Hypertarget{tracer_8h_ad13cd403eeb37d5e164be56c698140ed}\label{tracer_8h_ad13cd403eeb37d5e164be56c698140ed}} 
\mbox{\hyperlink{structtracer__keypair}{tracer\+\_\+keypair}} {\bfseries tracer\+\_\+current\+\_\+keypair}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Contains all of the user-\/facing interactions in the Tracer A\+PI. 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{tracer_8h_a3742f10381020abbd637d4f5ddec3891}\label{tracer_8h_a3742f10381020abbd637d4f5ddec3891}} 
\index{tracer.h@{tracer.h}!tracer\_ble\_payload\_add\_record@{tracer\_ble\_payload\_add\_record}}
\index{tracer\_ble\_payload\_add\_record@{tracer\_ble\_payload\_add\_record}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_ble\_payload\_add\_record()}{tracer\_ble\_payload\_add\_record()}}
{\footnotesize\ttfamily void tracer\+\_\+ble\+\_\+payload\+\_\+add\+\_\+record (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtracer__ble__payload}{tracer\+\_\+ble\+\_\+payload}} $\ast$}]{ble\+\_\+payload,  }\item[{uint8\+\_\+t}]{type,  }\item[{void $\ast$}]{data,  }\item[{size\+\_\+t}]{data\+\_\+len }\end{DoxyParamCaption})}



Adds a record to the B\+LE payload. 


\begin{DoxyParams}{Parameters}
{\em ble\+\_\+payload} & A pointer to the target B\+LE playload \\
\hline
{\em type} & A byte representing the type of the B\+LE record \\
\hline
{\em data} & A pointer to the raw record data \\
\hline
{\em data\+\_\+len} & The length of the record data \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{tracer_8h_a0aadea78bf29be28f5822988e1be642a}\label{tracer_8h_a0aadea78bf29be28f5822988e1be642a}} 
\index{tracer.h@{tracer.h}!tracer\_compare\_datapairs@{tracer\_compare\_datapairs}}
\index{tracer\_compare\_datapairs@{tracer\_compare\_datapairs}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_compare\_datapairs()}{tracer\_compare\_datapairs()}}
{\footnotesize\ttfamily bool tracer\+\_\+compare\+\_\+datapairs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}}}]{a,  }\item[{\mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}}}]{b }\end{DoxyParamCaption})}



Compares the value of two datapairs. 


\begin{DoxyParams}{Parameters}
{\em a} & A datapair to compare \\
\hline
{\em b} & A datapair to compare \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Whether or not the datapairs match 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_a631562f73427c2710771736e1a521089}\label{tracer_8h_a631562f73427c2710771736e1a521089}} 
\index{tracer.h@{tracer.h}!tracer\_derive\_aem@{tracer\_derive\_aem}}
\index{tracer\_derive\_aem@{tracer\_derive\_aem}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_derive\_aem()}{tracer\_derive\_aem()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtracer__aem}{tracer\+\_\+aem}} tracer\+\_\+derive\+\_\+aem (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtracer__aemk}{tracer\+\_\+aemk}}}]{aemk,  }\item[{\mbox{\hyperlink{structtracer__rpi}{tracer\+\_\+rpi}}}]{rpi,  }\item[{\mbox{\hyperlink{structtracer__metadata}{tracer\+\_\+metadata}}}]{metadata }\end{DoxyParamCaption})}



Encrypts metadata given an Associated Encrypted Metadata Key and Rolling Proximity Identifier. 


\begin{DoxyParams}{Parameters}
{\em aemk} & The A\+E\+MK to encrypt the metadata with \\
\hline
{\em rpi} & The R\+PI to associate the metadata with \\
\hline
{\em metadata} & The source metadata \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The 4-\/byte encrypted metadata 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_a109dfea4b92ad8581825c696865489ce}\label{tracer_8h_a109dfea4b92ad8581825c696865489ce}} 
\index{tracer.h@{tracer.h}!tracer\_derive\_aemk@{tracer\_derive\_aemk}}
\index{tracer\_derive\_aemk@{tracer\_derive\_aemk}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_derive\_aemk()}{tracer\_derive\_aemk()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtracer__aemk}{tracer\+\_\+aemk}} tracer\+\_\+derive\+\_\+aemk (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}}}]{tek }\end{DoxyParamCaption})}



Derives an corresponding Associated Encrypted Metadata Key from a Temporary Exposure Key. 


\begin{DoxyParams}{Parameters}
{\em tek} & The T\+EK to derive the A\+E\+MK from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The T\+EK\textquotesingle{}s corresponding A\+E\+MK 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_a8a38ceec0a0cb58bc87e43287d8cea57}\label{tracer_8h_a8a38ceec0a0cb58bc87e43287d8cea57}} 
\index{tracer.h@{tracer.h}!tracer\_derive\_ble\_payload@{tracer\_derive\_ble\_payload}}
\index{tracer\_derive\_ble\_payload@{tracer\_derive\_ble\_payload}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_derive\_ble\_payload()}{tracer\_derive\_ble\_payload()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtracer__ble__payload}{tracer\+\_\+ble\+\_\+payload}} tracer\+\_\+derive\+\_\+ble\+\_\+payload (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}}}]{datapair }\end{DoxyParamCaption})}



Derives a new raw B\+LE payload given a datapair. 


\begin{DoxyParams}{Parameters}
{\em datapair} & The datapair to generate the B\+LE payload from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A raw bluetooth payload containing all required data 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_a36e3c68ffd53218b36de2326be850f01}\label{tracer_8h_a36e3c68ffd53218b36de2326be850f01}} 
\index{tracer.h@{tracer.h}!tracer\_derive\_datapair@{tracer\_derive\_datapair}}
\index{tracer\_derive\_datapair@{tracer\_derive\_datapair}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_derive\_datapair()}{tracer\_derive\_datapair()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}} tracer\+\_\+derive\+\_\+datapair (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{epoch,  }\item[{int8\+\_\+t}]{tx\+\_\+power }\end{DoxyParamCaption})}



Derives a R\+P\+I-\/\+A\+EM pair given a unix epoch and tx power. This can be used to create bluetooth payloads. 


\begin{DoxyParams}{Parameters}
{\em epoch} & The U\+N\+IX epoch time, expressed as a 32-\/bit unsigned integer \\
\hline
{\em tx\+\_\+power} & The transmitting power of the transmitter in d\+Bm, expressed as an 8-\/bit signed integer \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{tracer_8h_a5e2a646f64065538e3f42937beb61454}\label{tracer_8h_a5e2a646f64065538e3f42937beb61454}} 
\index{tracer.h@{tracer.h}!tracer\_derive\_keypair@{tracer\_derive\_keypair}}
\index{tracer\_derive\_keypair@{tracer\_derive\_keypair}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_derive\_keypair()}{tracer\_derive\_keypair()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtracer__keypair}{tracer\+\_\+keypair}} tracer\+\_\+derive\+\_\+keypair (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}}}]{tek }\end{DoxyParamCaption})}



Derives a tracer keypair for generating an R\+PI and A\+EM. 


\begin{DoxyParams}{Parameters}
{\em tek} & The Temporary Exposure Key to derive the keypair from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A keypair containing both an Rolling Proximity Identifier Key and Associated Encrypted Metadata Key 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_a6dad82131e380a50b8f558121f9b0fe3}\label{tracer_8h_a6dad82131e380a50b8f558121f9b0fe3}} 
\index{tracer.h@{tracer.h}!tracer\_derive\_metadata@{tracer\_derive\_metadata}}
\index{tracer\_derive\_metadata@{tracer\_derive\_metadata}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_derive\_metadata()}{tracer\_derive\_metadata()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtracer__metadata}{tracer\+\_\+metadata}} tracer\+\_\+derive\+\_\+metadata (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{tx\+\_\+power }\end{DoxyParamCaption})}



Derives unencrypted metadata. 


\begin{DoxyParams}{Parameters}
{\em tx\+\_\+power} & The transmitting power of the B\+LE radio, in d\+Bm \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Unenecrypted metadata 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_af2acdc5098bfd7ab07cfd053f059962e}\label{tracer_8h_af2acdc5098bfd7ab07cfd053f059962e}} 
\index{tracer.h@{tracer.h}!tracer\_derive\_rpi@{tracer\_derive\_rpi}}
\index{tracer\_derive\_rpi@{tracer\_derive\_rpi}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_derive\_rpi()}{tracer\_derive\_rpi()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtracer__rpi}{tracer\+\_\+rpi}} tracer\+\_\+derive\+\_\+rpi (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtracer__rpik}{tracer\+\_\+rpik}}}]{rpik,  }\item[{uint32\+\_\+t}]{epoch }\end{DoxyParamCaption})}



Encrypts a Rolling Proximity Identifier from an R\+P\+IK and U\+N\+IX epoch. 


\begin{DoxyParams}{Parameters}
{\em rpik} & The Temporary Exposure Key to encrypt the R\+PI \\
\hline
{\em epoch} & The current U\+N\+IX epoch time \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An encrypted Tracer Rolling Proximity Identifier 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_a513d72ec8ee52ad99d5f5d388ae75b70}\label{tracer_8h_a513d72ec8ee52ad99d5f5d388ae75b70}} 
\index{tracer.h@{tracer.h}!tracer\_derive\_rpik@{tracer\_derive\_rpik}}
\index{tracer\_derive\_rpik@{tracer\_derive\_rpik}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_derive\_rpik()}{tracer\_derive\_rpik()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtracer__rpik}{tracer\+\_\+rpik}} tracer\+\_\+derive\+\_\+rpik (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}}}]{tek }\end{DoxyParamCaption})}



Derives a new Rolling Proximity Identifier Key from a Temporary Exposure Key. 


\begin{DoxyParams}{Parameters}
{\em tek} & The Temporary Exposure Key to derive the R\+PI from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The output Rolling Proximity Identifier Key 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_a6df351c545f88109e4fa00d687c7c7ca}\label{tracer_8h_a6df351c545f88109e4fa00d687c7c7ca}} 
\index{tracer.h@{tracer.h}!tracer\_derive\_tek@{tracer\_derive\_tek}}
\index{tracer\_derive\_tek@{tracer\_derive\_tek}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_derive\_tek()}{tracer\_derive\_tek()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}}$\ast$ tracer\+\_\+derive\+\_\+tek (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{epoch }\end{DoxyParamCaption})}



Generates a new Temporary Exposure Key and updates the latest keypair. 


\begin{DoxyParams}{Parameters}
{\em epoch} & The current U\+N\+IX epoch time \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A pointer to the latest T\+EK 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_ac10f55b7d776b6fdc6b70c3e0dd4de39}\label{tracer_8h_ac10f55b7d776b6fdc6b70c3e0dd4de39}} 
\index{tracer.h@{tracer.h}!tracer\_detect\_enin\_rollover@{tracer\_detect\_enin\_rollover}}
\index{tracer\_detect\_enin\_rollover@{tracer\_detect\_enin\_rollover}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_detect\_enin\_rollover()}{tracer\_detect\_enin\_rollover()}}
{\footnotesize\ttfamily bool tracer\+\_\+detect\+\_\+enin\+\_\+rollover (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{last\+\_\+epoch,  }\item[{uint32\+\_\+t}]{current\+\_\+epoch }\end{DoxyParamCaption})}



Detects if there has been an E\+N\+Interval\+Number rollover. 


\begin{DoxyParams}{Parameters}
{\em last\+\_\+epoch} & The last time the E\+N\+Interval\+Number changed, as a 32-\/bit unsigned U\+N\+IX epoch \\
\hline
{\em current\+\_\+epoch} & The current U\+N\+IX epoch time \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Whether or not there should be a new datapair derivation 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_a58173ac16d4cb9eb3a115955b1d28b65}\label{tracer_8h_a58173ac16d4cb9eb3a115955b1d28b65}} 
\index{tracer.h@{tracer.h}!tracer\_detect\_scanin\_rollover@{tracer\_detect\_scanin\_rollover}}
\index{tracer\_detect\_scanin\_rollover@{tracer\_detect\_scanin\_rollover}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_detect\_scanin\_rollover()}{tracer\_detect\_scanin\_rollover()}}
{\footnotesize\ttfamily bool tracer\+\_\+detect\+\_\+scanin\+\_\+rollover (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{last\+\_\+epoch,  }\item[{uint32\+\_\+t}]{current\+\_\+epoch }\end{DoxyParamCaption})}



Detects whether or not there should be a B\+LE scan performed. 


\begin{DoxyParams}{Parameters}
{\em last\+\_\+epoch} & The last time a scan was performed, as a 32-\/bit unsigned U\+N\+IX epoch \\
\hline
{\em current\+\_\+epoch} & The current U\+N\+IX epoch time \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Whether or not there should be a B\+LE scan performed. 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_ad19adbc4b2555468a65e65d701c2e4a8}\label{tracer_8h_ad19adbc4b2555468a65e65d701c2e4a8}} 
\index{tracer.h@{tracer.h}!tracer\_detect\_tek\_rollover@{tracer\_detect\_tek\_rollover}}
\index{tracer\_detect\_tek\_rollover@{tracer\_detect\_tek\_rollover}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_detect\_tek\_rollover()}{tracer\_detect\_tek\_rollover()}}
{\footnotesize\ttfamily bool tracer\+\_\+detect\+\_\+tek\+\_\+rollover (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{last\+\_\+epoch,  }\item[{uint32\+\_\+t}]{current\+\_\+epoch }\end{DoxyParamCaption})}



Detects if there needs to be a new T\+EK generated. 


\begin{DoxyParams}{Parameters}
{\em last\+\_\+epoch} & The last time a T\+EK was generated, as a 32-\/bit unsigned U\+N\+IX epoch \\
\hline
{\em current\+\_\+epoch} & The current U\+N\+IX epoch time \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Whether or not a new T\+EK should be generated. 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_a4a35291fe76864b6ceb28dc91530cafd}\label{tracer_8h_a4a35291fe76864b6ceb28dc91530cafd}} 
\index{tracer.h@{tracer.h}!tracer\_en\_interval\_number@{tracer\_en\_interval\_number}}
\index{tracer\_en\_interval\_number@{tracer\_en\_interval\_number}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_en\_interval\_number()}{tracer\_en\_interval\_number()}}
{\footnotesize\ttfamily uint32\+\_\+t tracer\+\_\+en\+\_\+interval\+\_\+number (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{epoch }\end{DoxyParamCaption})}



Gets the E\+N\+Interval\+Number given an epoch. 


\begin{DoxyParams}{Parameters}
{\em epoch} & The current U\+N\+IX epoch time \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The E\+N\+Interval\+Number, expressed as a 32-\/bit unsigned integer 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_a71cc1557149895133059388f0e60f57a}\label{tracer_8h_a71cc1557149895133059388f0e60f57a}} 
\index{tracer.h@{tracer.h}!tracer\_get\_latest\_tek@{tracer\_get\_latest\_tek}}
\index{tracer\_get\_latest\_tek@{tracer\_get\_latest\_tek}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_get\_latest\_tek()}{tracer\_get\_latest\_tek()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}} tracer\+\_\+get\+\_\+latest\+\_\+tek (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Gets the latest Temporary Exposure Key generated. 

\begin{DoxyReturn}{Returns}
The the latest Temporary Exposure Key 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_a8d79eac8cf4cd46c8966ed8accc0d370}\label{tracer_8h_a8d79eac8cf4cd46c8966ed8accc0d370}} 
\index{tracer.h@{tracer.h}!tracer\_parse\_ble\_payload@{tracer\_parse\_ble\_payload}}
\index{tracer\_parse\_ble\_payload@{tracer\_parse\_ble\_payload}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_parse\_ble\_payload()}{tracer\_parse\_ble\_payload()}}
{\footnotesize\ttfamily bool tracer\+\_\+parse\+\_\+ble\+\_\+payload (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtracer__ble__payload}{tracer\+\_\+ble\+\_\+payload}}}]{payload,  }\item[{\mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}} $\ast$}]{datapair }\end{DoxyParamCaption})}



Attempts to parse a raw B\+LE adverising payload. 


\begin{DoxyParams}{Parameters}
{\em payload} & The raw bluetooth payload to parse \\
\hline
{\em datapair} & A pointer to a datapair which will be overwritten with the drived datapair in the case that the data is valid. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Whether or not the parsing was successful 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_acbcdbab25c515d737b4db4f198443b15}\label{tracer_8h_acbcdbab25c515d737b4db4f198443b15}} 
\index{tracer.h@{tracer.h}!tracer\_scan\_interval\_number@{tracer\_scan\_interval\_number}}
\index{tracer\_scan\_interval\_number@{tracer\_scan\_interval\_number}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_scan\_interval\_number()}{tracer\_scan\_interval\_number()}}
{\footnotesize\ttfamily uint32\+\_\+t tracer\+\_\+scan\+\_\+interval\+\_\+number (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{epoch }\end{DoxyParamCaption})}



Gets the Scan Interval Number given an epoch. 


\begin{DoxyParams}{Parameters}
{\em epoch} & The current U\+N\+IX epoch time \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The Scan Interval Number, expressed as a 32-\/bit unsigned integer 
\end{DoxyReturn}
\mbox{\Hypertarget{tracer_8h_ab8dea46c9d02bd743e7cc04fe43cb5a5}\label{tracer_8h_ab8dea46c9d02bd743e7cc04fe43cb5a5}} 
\index{tracer.h@{tracer.h}!tracer\_verify@{tracer\_verify}}
\index{tracer\_verify@{tracer\_verify}!tracer.h@{tracer.h}}
\doxysubsubsection{\texorpdfstring{tracer\_verify()}{tracer\_verify()}}
{\footnotesize\ttfamily bool tracer\+\_\+verify (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtracer__datapair}{tracer\+\_\+datapair}}}]{datapair,  }\item[{\mbox{\hyperlink{structtracer__tek}{tracer\+\_\+tek}}}]{tek,  }\item[{uint32\+\_\+t $\ast$}]{enin,  }\item[{\mbox{\hyperlink{structtracer__metadata}{tracer\+\_\+metadata}} $\ast$}]{output\+\_\+metadata }\end{DoxyParamCaption})}



Checks if a scanned R\+PI and A\+EM pair matches a downloaded T\+EK. 


\begin{DoxyParams}{Parameters}
{\em datapair} & The input scanned datapair, which can derived from \mbox{\hyperlink{tracer_8h_a8d79eac8cf4cd46c8966ed8accc0d370}{tracer\+\_\+parse\+\_\+ble\+\_\+payload()}}. \\
\hline
{\em tek} & The Temporary Exposure Key to test the datapair against. \\
\hline
{\em enin} & A pointer to a 32-\/bit unsigned integer which will be overwritten with the datapair\textquotesingle{}s generation E\+N\+Interval\+Number in the case of a T\+EK match \\
\hline
{\em output\+\_\+metadata} & A pointer to a metadata object which will be overwritten with the datapair\textquotesingle{}s decrypted metadata in the case of a T\+EK match \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Whether or not the datapair was successfully decrypted 
\end{DoxyReturn}
